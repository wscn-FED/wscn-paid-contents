!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.WSAudioPlayer=e():t.WSAudioPlayer=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var o=i[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function n(t){var e={container:"",autoPlay:!1,loop:!1,audio:{src:""}};if(!t.audio||!t.audio.src)throw new Error("must set the audio source");if(!t.container||"string"!=typeof t.container)throw new Error("container must be set and only be string!");this.options=$.extend({},e,t),this.audio=null,this.container=$("#"+t.container),this.isPlaying=!1,this.init()}function o(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}function s(t){t.preventDefault(),t.stopPropagation()}function a(t){var e=parseInt(t%60),i=parseInt(t/60%60);return e=("0"+e).slice(-2),i=("0"+i).slice(-2),i+":"+e}function r(t){var e=t[0],i=e.getTotalLength();return e.style.strokeDasharray=i+" "+i,e.style.strokeDashoffset=i+"px",e}i(1),n.prototype.init=function(){this.generateTemplate(),this.attachEvents(),this.options.autoPlay&&(this.audio.autoplay=!0,this.play()),this.options.loop&&(this.audio.loop=!0)},n.prototype.generateTemplate=function(){var t='<div class="ws-audio">\n        <div class="ws-audio-wrap">\n          <audio src="'+this.options.audio.src+'"></audio>\n        </div>\n        <div class="ws-audio-body">\n          <div class="ws-audio-body-left">\n            <div class="ws-audio-play-pause">\n              <div class="ws-audio-progress-bar">\n                <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="32" height="32" viewBox="0 0 32 32">\n                  <path fill="none" stroke="#4990e2" stroke-width="0.6154" stroke-miterlimit="4" stroke-linecap="butt" stroke-linejoin="miter" d="M31.385 16c0 8.497-6.888 15.385-15.385 15.385s-15.385-6.888-15.385-15.385c0-8.497 6.888-15.385 15.385-15.385s15.385 6.888 15.385 15.385z"></path>\n                </svg>\n              </div>\n              <span class="fa fa-play-circle-o"></span>\n              <span class="fa fa-pause-circle-o"></span>\n            </div>\n            <div class="ws-audio-info">\n              <div class="ws-aduio-info-title">\n                '+this.options.audio.title+'\n              </div>\n              <div class="ws-audio-info-time">\n                <span class="ws-audio-currenttime">00:00</span>\n                <span class="ws-audio-divider">/</span>\n                <span class="ws-audio-duration">00:00</span>\n              </div>\n            </div>\n          </div>\n          <div class="ws-audio-body-right">\n            <span class="fa fa-download"></span>\n            <span class="ws-audio-size">'+this.options.audio.size+"</span>\n          </div>\n        </div>\n      </div>";this.container.append(t),this.audioElem=this.container.find("audio"),this.audio=this.audioElem[0],this.currentTimeElem=this.container.find(".ws-audio-currenttime"),this.durationElem=this.container.find(".ws-audio-duration"),this.playElem=this.container.find(".fa-play-circle-o"),this.pauseElem=this.container.find(".fa-pause-circle-o"),this.playAndPauseElem=this.container.find(".ws-audio-play-pause"),this.progressElem=this.container.find(".ws-audio-progress-bar"),this.progressPathElem=this.progressElem.find("svg > path"),this.pathDomElem=r(this.progressPathElem)},n.prototype.updateCircleProgress=function(t){var e=this.pathDomElem.getTotalLength();this.pathDomElem.style.strokeDashoffset=e-e*t+"px"},n.prototype.attachEvents=function(){var t=this;this.audio.addEventListener("loadstart",function(){console.log("audio start loading")},!1),this.audio.addEventListener("loadedmetadata",function(e){console.log("loaded meta data..."),t.durationElem.text(a(t.audio.duration))},!1),this.audio.addEventListener("durationchange",function(){console.log("duration change")},!1),this.audio.addEventListener("loadeddata",function(){console.log("loaded data")},!1),this.audio.addEventListener("timeupdate",function(e){var i=t.audio.currentTime;t.currentTimeElem.text(a(i));var n=i/t.audio.duration;t.updateCircleProgress(n)},!1),this.audio.addEventListener("ended",function(){t.isPlaying=!1,t.playAndPauseElem.removeClass("is-playing")},!1),o()?(this.playElem[0].addEventListener("touchstart",function(e){s(e),t.play()},!1),this.pauseElem[0].addEventListener("touchstart",function(e){s(e),t.pause()},!1)):(this.playElem.on("click",function(e){t.play()}),this.pauseElem.on("click",function(e){t.pause()}))},n.prototype.play=function(){this.isPlaying=!0,this.playAndPauseElem.addClass("is-playing"),this.audio.play()},n.prototype.pause=function(){this.isPlaying=!1,this.playAndPauseElem.removeClass("is-playing"),this.audio.pause()},t.exports=n},function(t,e,i){var n=i(2);"string"==typeof n&&(n=[[t.id,n,""]]);i(4)(n,{});n.locals&&(t.exports=n.locals)},function(t,e,i){e=t.exports=i(3)(),e.push([t.id,".ws-audio{height:60px;padding-left:15px;padding-right:15px;background-color:#fff}.ws-audio-wrap{display:none}.ws-audio-body{width:100%;-ms-flex-pack:justify;justify-content:space-between}.ws-audio-body,.ws-audio-body-left{height:100%}.ws-audio-body,.ws-audio-body-left,.ws-audio-play-pause{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}.ws-audio-play-pause{font-size:45px;color:#1478f0;position:relative;width:50px;height:50px;z-index:1000;-ms-flex-pack:center;justify-content:center}.ws-audio-progress-bar{position:absolute;top:0;left:0;width:50px;height:50px;z-index:1100}.ws-audio-progress-bar svg{width:50px;height:50px}.ws-audio-play-pause .fa{cursor:pointer;position:absolute;top:2px;left:6px;z-index:1200}.ws-audio-play-pause .fa-pause-circle-o{display:none}.ws-audio-play-pause.is-playing .fa-pause-circle-o{display:block}.ws-audio-play-pause.is-playing .fa-play-circle-o{display:none}.ws-audio-info{margin-left:32px}.ws-aduio-info-title{font-size:15px;color:#333}.ws-audio-info-time,.ws-audio-size{font-size:12px;color:#666;margin-top:2px}.ws-audio-body-right{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center}.ws-audio-body-right .fa-download{font-size:20px;color:#1478f0}.ws-audio-size{display:block;width:100%;text-align:center}",""])},function(t,e){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},o=0;o<this.length;o++){var s=this[o][0];"number"==typeof s&&(n[s]=!0)}for(o=0;o<e.length;o++){var a=e[o];"number"==typeof a[0]&&n[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),t.push(a))}},t}},function(t,e,i){function n(t,e){for(var i=0;i<t.length;i++){var n=t[i],o=f[n.id];if(o){o.refs++;for(var s=0;s<o.parts.length;s++)o.parts[s](n.parts[s]);for(;s<n.parts.length;s++)o.parts.push(u(n.parts[s],e))}else{for(var a=[],s=0;s<n.parts.length;s++)a.push(u(n.parts[s],e));f[n.id]={id:n.id,refs:1,parts:a}}}}function o(t){for(var e=[],i={},n=0;n<t.length;n++){var o=t[n],s=o[0],a=o[1],r=o[2],d=o[3],u={css:a,media:r,sourceMap:d};i[s]?i[s].parts.push(u):e.push(i[s]={id:s,parts:[u]})}return e}function s(t,e){var i=v(),n=w[w.length-1];if("top"===t.insertAt)n?n.nextSibling?i.insertBefore(e,n.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),w.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function a(t){t.parentNode.removeChild(t);var e=w.indexOf(t);e>=0&&w.splice(e,1)}function r(t){var e=document.createElement("style");return e.type="text/css",s(t,e),e}function d(t){var e=document.createElement("link");return e.rel="stylesheet",s(t,e),e}function u(t,e){var i,n,o;if(e.singleton){var s=g++;i=m||(m=r(e)),n=l.bind(null,i,s,!1),o=l.bind(null,i,s,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=d(e),n=c.bind(null,i),o=function(){a(i),i.href&&URL.revokeObjectURL(i.href)}):(i=r(e),n=p.bind(null,i),o=function(){a(i)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else o()}}function l(t,e,i,n){var o=i?"":n.css;if(t.styleSheet)t.styleSheet.cssText=x(e,o);else{var s=document.createTextNode(o),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function p(t,e){var i=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function c(t,e){var i=e.css,n=e.sourceMap;n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var o=new Blob([i],{type:"text/css"}),s=t.href;t.href=URL.createObjectURL(o),s&&URL.revokeObjectURL(s)}var f={},h=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},y=h(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),v=h(function(){return document.head||document.getElementsByTagName("head")[0]}),m=null,g=0,w=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=y()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var i=o(t);return n(i,e),function(t){for(var s=[],a=0;a<i.length;a++){var r=i[a],d=f[r.id];d.refs--,s.push(d)}if(t){var u=o(t);n(u,e)}for(var a=0;a<s.length;a++){var d=s[a];if(0===d.refs){for(var l=0;l<d.parts.length;l++)d.parts[l]();delete f[d.id]}}}};var x=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()}])});